# üß¨ BioFetch - Complete Working Implementation

## üì¶ What You'll Get

This is a **complete, production-ready** bioinformatics data downloader with:

- ‚úÖ **Backend API** (FastAPI + MongoDB) - Fully functional with 6 databases
- ‚úÖ **Web Interface** (React + Tailwind + shadcn/ui) - Modern, responsive dashboard
- ‚úÖ **CLI Tool** (Python) - Command-line interface for power users
- ‚úÖ **Real-time Progress** - Live job monitoring and statistics
- ‚úÖ **File Management** - Download, validate, and track biological data
- ‚úÖ **Docker Support** - Easy deployment with docker-compose

## üöÄ Quick Start (5 Minutes)

### Option 1: Docker (Recommended - Easiest)

```bash
# 1. Clone or create project directory
mkdir biofetch && cd biofetch

# 2. Create docker-compose.yml (see below)
# 3. Create backend/ and frontend/ directories with files
# 4. Run:
docker-compose up -d

# 5. Access:
# - Web UI: http://localhost:3000
# - API: http://localhost:8001/docs
```

### Option 2: Manual Setup (Full Control)

**Prerequisites:**
- Python 3.8+
- Node.js 16+
- MongoDB running on localhost:27017

```bash
# 1. Setup Backend
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn server:app --reload --port 8001

# 2. Setup Frontend (new terminal)
cd frontend
npm install  # or yarn install
npm start

# 3. Test CLI (new terminal)
python biofetch_cli.py test
python biofetch_cli.py databases
```

# üß¨ BioFetch - Complete Setup Guide

## Prerequisites
- Python 3.8+
- Node.js 16+
- MongoDB (or use Docker)
- Git

## Quick Start with Docker (Recommended)

### 1. Create docker-compose.yml
```yaml
version: '3.8'

services:
  mongodb:
    image: mongo:7.0
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db
    environment:
      - MONGO_INITDB_DATABASE=biofetch

  backend:
    build: ./backend
    ports:
      - "8001:8001"
    depends_on:
      - mongodb
    environment:
      - MONGO_URL=mongodb://mongodb:27017
      - DB_NAME=biofetch
      - CORS_ORIGINS=http://localhost:3000
    volumes:
      - ./backend:/app
      - ./backend/downloads:/app/downloads

  frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    depends_on:
      - backend
    environment:
      - REACT_APP_BACKEND_URL=http://localhost:8001
    volumes:
      - ./frontend:/app
      - /app/node_modules

volumes:
  mongodb_data:
```

### 2. Backend Setup

**Create backend/Dockerfile:**
```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

CMD ["uvicorn", "server:app", "--host", "0.0.0.0", "--port", "8001", "--reload"]
```

**Create backend/requirements.txt:**
```txt
fastapi==0.110.1
uvicorn==0.25.0
python-dotenv>=1.0.1
pymongo==4.5.0
pydantic>=2.6.4
motor==3.3.1
aiohttp>=3.8.0
aiofiles>=0.8.0
python-multipart>=0.0.9
```

**Create backend/.env:**
```env
MONGO_URL=mongodb://localhost:27017
DB_NAME=biofetch
CORS_ORIGINS=*
```

### 3. Frontend Setup

**Create frontend/Dockerfile:**
```dockerfile
FROM node:18-alpine

WORKDIR /app

COPY package.json yarn.lock ./
RUN yarn install

COPY . .

CMD ["yarn", "start"]
```

**Create frontend/.env:**
```env
REACT_APP_BACKEND_URL=http://localhost:8001
WDS_SOCKET_PORT=0
```

## Manual Setup (Without Docker)

### Backend Setup

1. **Create virtual environment:**
```bash
cd backend
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

2. **Install dependencies:**
```bash
pip install -r requirements.txt
```

3. **Start MongoDB:**
```bash
# Using MongoDB locally
mongod --dbpath ./data/db

# Or use MongoDB Atlas (cloud)
# Update MONGO_URL in .env with your connection string
```

4. **Run backend:**
```bash
uvicorn server:app --reload --port 8001
```

### Frontend Setup

1. **Install dependencies:**
```bash
cd frontend
yarn install
```

2. **Run frontend:**
```bash
yarn start
```

## üöÄ Running the Application

### Option 1: Docker (Easiest)
```bash
# Start all services
docker-compose up -d

# View logs
docker-compose logs -f

# Stop services
docker-compose down
```

### Option 2: Manual
```bash
# Terminal 1: MongoDB
mongod

# Terminal 2: Backend
cd backend
source venv/bin/activate
uvicorn server:app --reload --port 8001

# Terminal 3: Frontend
cd frontend
yarn start
```

## üìù Usage Examples

### Web Interface
1. Open http://localhost:3000
2. Navigate to "Download" tab
3. Enter accession ID (e.g., `SRR000001`)
4. Select database (e.g., `SRA`)
5. Click "Download"
6. Monitor progress in "Jobs" tab

### CLI Usage
```bash
# Install requests library
pip install requests

# Test connection
python biofetch_cli.py test

# List databases
python biofetch_cli.py databases

# Download single file
python biofetch_cli.py download --accession SRR000001 --db sra

# Check jobs
python biofetch_cli.py jobs

# View statistics
python biofetch_cli.py stats
```

### API Usage
```bash
# List databases
curl http://localhost:8001/api/databases

# Start download
curl -X POST http://localhost:8001/api/download \
  -H "Content-Type: application/json" \
  -d '{"accession_id": "SRR000001", "database": "sra"}'

# Check job status
curl http://localhost:8001/api/jobs/{job_id}

# Get statistics
curl http://localhost:8001/api/stats
```

## üß™ Testing

### Backend Tests
```bash
cd backend
pytest tests/
```

### Frontend Tests
```bash
cd frontend
yarn test
```

### Integration Tests
```bash
# Test full workflow
python test_integration.py
```

## üîß Troubleshooting

### Port Already in Use
```bash
# Find process using port 8001
lsof -i :8001
kill -9 <PID>

# Or use different port
uvicorn server:app --port 8002
```

### MongoDB Connection Issues
```bash
# Check MongoDB status
sudo systemctl status mongod

# Restart MongoDB
sudo systemctl restart mongod

# Or use Docker
docker run -d -p 27017:27017 mongo:7.0
```

### Frontend Build Issues
```bash
# Clear cache
rm -rf node_modules package-lock.json yarn.lock
yarn install

# Or use npm
npm install --legacy-peer-deps
```

## üìö API Documentation

Once running, visit:
- **Swagger UI**: http://localhost:8001/docs
- **ReDoc**: http://localhost:8001/redoc

## üéØ Supported Databases

1. **SRA** (Sequence Read Archive) - NCBI
2. **GenBank** - NCBI
3. **ENA** (European Nucleotide Archive)
4. **UniProt** (Universal Protein Resource)
5. **PDB** (Protein Data Bank)
6. **GEO** (Gene Expression Omnibus)

## üîê Production Deployment

### Environment Variables
```env
# Backend
MONGO_URL=mongodb://production-mongo:27017
DB_NAME=biofetch_prod
CORS_ORIGINS=https://yourdomain.com
SECRET_KEY=your-secret-key-here

# Frontend
REACT_APP_BACKEND_URL=https://api.yourdomain.com
```

### Build for Production
```bash
# Backend
cd backend
pip install -r requirements.txt
gunicorn server:app -w 4 -k uvicorn.workers.UvicornWorker

# Frontend
cd frontend
yarn build
# Serve build folder with nginx or similar
```

## üìû Support

- **Issues**: Create GitHub issue
- **Documentation**: See README.md
- **Community**: Join discussions

## üéâ Success Indicators

‚úÖ Backend running on http://localhost:8001
‚úÖ Frontend running on http://localhost:3000
‚úÖ MongoDB connected
‚úÖ API responding at /api/databases
‚úÖ Web interface loading
‚úÖ Downloads completing successfully

---

**You're all set! Start downloading biological data with ease! üß¨**
